## 编译原理

编译原理是构造编译程序的基本原理。

### 编译程序简单概述

- __编译原理__:从字面意思来理解就是 __构造编译程序的基本原理__。
- __编译程序__:是一种翻译程序，将源语言翻译为目标语言。 例: C 语言代码 -> 汇编代码   机器能识别有电和没电，对应的是0和1 0代表低点位，1代表高电位，而人类难以理解由0和1构成的代码，所以我们需要 Java、C 这种更容易被人类理解高级语言，来写下代码，然后再由编译程序将高级语言的代码翻译成为低级语言的代码，这样子才能让机器能够运行计算机程序。
- __编译过程__:逻辑过程有 词法分析、语法分析、中代码生成/优化、目标代码生成/优化。
- __词法分析__:
例如
```js
class Foo {
  constructor(bar){
    this.bar = bar
  }
}
```
例如上面的 `class` 、 `Foo` 、 `constructor` 、 `bar` 、 `this` 、 `{` 、 `}` 、 `.`  、 `=` 等 这种最小的单元、可以称之为单词，把它们都分析出来、这就是词法分析。

- __语法分析__:
  语法分析就是在完成 词法分析 之后，这些单元组成的句子 例如 `this.bar = bar` `class Foo {}` 等等 这种写法是不是存在的也就是被允许的。如果不被允许那么编译程序就会报错。

- __语义分析__:
   语义分析就是分析合法语句的具体程序含义，也就是程序语句到底要做什么。（让机器去理解计算机具体要执行的步骤，并且让计算机去执行）

注意: __中代码生成/优化、目标代码生成/优化__ 这两个步骤不是很死板的发生在语义分析的后面，通常在语法分析的过程中就会生成中间代码，在语义分析的过程中就会生成目标代码，优化则是在代码生成后的一些工作。

### 符号和符号串的学习

- __字母表__: $\Sigma = \{ a, b,c \}$  字母表是符号的集合也可以成为符号集。   $a$ , $ab$ , $abc$ 都是 $\Sigma$ 上的符号串。

- __符号串__: 我们可以看到在上面的字母表中有 $a$ 、 $b$ 、 $c$ 三个符号，他们之间的任意组合都是 $\Sigma$ 上的符号串。

- __空串__: 空串是长度为零的串，记作 $\varepsilon$ 。长度用两条竖线表示 例如 $ab$ 的长度用 $|ab|$ 表示。（ $|ab|=2$ ）

- __子串__: 对于 $x=abc$ ， $a$ 、 $ab$ 、 $abc$ 、都是其子串， $ba$  、 $\varepsilon$ 都不是。

- __符号串的头尾__: 如果 $z=xy$ 是一串符号串，那么 $x$ 是 $z$ 的头， $y$ 是 $z$ 的尾, 如果 $x$ 是非空的，那麽 $y$ 是固有尾;同样如果 $y$ 非空，那么 $x$ 是固有头。 设 $z=abc$ ，那么 $z$ 的头是 $\varepsilon$ ， $a$ ， $ab$ 和 $abc$ ；除 $abc$ 外，其他都是固有头； $z$ 的尾是 $\varepsilon$ ， $c$ ， $bc$ 和 $abc$ ； $z$ 的固有尾是 $\varepsilon$ ， $c$ 和 $bc$ 。

  当我们对符号 $z=xy$ 的头感兴趣，而对其余部分不感兴趣时，可以采用省略写法： $z=x\cdots$ ；如果只是强调 $x$ 在符号串 $z$ 中的某处出现， 则可表示为: $z= \cdots x \cdots$ ；符号 $t$ 是符号串 $z$ 的第一个符号，则表示为 $z=t\cdots$ 。
- __符号串的连接__: 设 $x$ 和 $y$ 是符号串，它们的连接 $xy$ 是把 $y$ 的符号写在 $x$ 的符号之后得到的符号串。 例如，设 $x=ST$ ， $y=abu$ ，则它们的连接 $xy=STabu$ ，看出 $|x|=2$ ， $|y|=3$ ， $|xy|=5$ 。由于 $\varepsilon$ 的含义，显然有 $\varepsilon x=x \varepsilon = x$ 。
- __符号串的方幂__: 设 $x$ 是符号串，把 $x$ 自身连接 $n$ 次得到符号串 $z$ ，即 $z=xx \cdots xx$ ，成为符号串 $x$ 的方幂， 写作 $z=x^n$ ，即把符号串 $x$ 相继地重复写 $n$ 次。 $x^0= \varepsilon$ ， $x^1=x$ ， $x^2=xx$ ， $x^3=xxx$ 分别对应于 $n=0,1,2,3$ ，例如， 设 $x=AB$ ，则 $x^0= \varepsilon$ ， $x^1=AB$ ， $x^2=ABAB$ ， $x^3=ABABAB$ 。对于 $n>0$ ，有 $x^n=xx^{n-1}=x^{n-1}x$ 。
- __符号串集合__: 若集合 $A$ 中的一切元素都是某字母表 $\Sigma$ 上的符号串，则称 $A$ 为该字母表 $\Sigma$ 上的符号串集合。 例如 $\Sigma = \{ 1, 2,3 \}$ $A=\{12,13,231\}$ 。

  符号串集合有三种表示方法：
  - 枚举表示法: $\{I,II,III\}$
  - 省略表示法: $\{I,II,III,IIII,\cdots \}$
  - 描述表示法: $\{x|x满足条件c \}$

  $\Sigma=\{ 1 \}$ $A= \{ x|x是该字母表上的符号串，且 1 \leq |x| \leq 3 \} $

  - 空集：不含任何元素的集合，记为 $\emptyset$ 。 （注意空集和空串的区别 空集是一个集合里面什么都没有，空串是一个元素即空字符串。）
  - 两个符号串集合的乘积: A与B的乘积 $AB={xy|x \in A，且 y \in B}$ 。
    
      例如: $A={1,2}$ $B={5,6,7}$ 则 $AB={15,16,17,25,26,27}$
  - $\Sigma$ 的闭包: $\Sigma ^* = \Sigma ^0 \cup \Sigma ^1 \cup \Sigma ^2 \cdots \cup \Sigma ^n \cup \cdots$ 。 
    
     $\Sigma ^{* }$ 表示 $\Sigma$ 上一切长度为 $n(n \leq 0)$ 的符号串所组成的集合。 例如: $\Sigma = {a,b}$ 那么 $\Sigma ^* = { \varepsilon , a, b, aa, ab, bb, ba, aaa, aab, aba, abb, bbb, bba, \cdots }$
    
  - $\Sigma$ 的正闭包: $\Sigma ^+ = \Sigma ^1 \cup \Sigma ^2 \cup \cdots \cup \Sigma ^n \cup \cdots$ (它比  $\Sigma ^{* }$ 少了一个 $\varepsilon$ )
    
    显然 $\Sigma ^{* } = \Sigma ^0 \cup \Sigma ^{+}$ ， $\Sigma ^+ = \Sigma \Sigma ^* = \Sigma ^* \Sigma $ 

### 文法和语言

  文法 G [<标识符>]: 
  - <标识符> -> <字母>
  - <标识符> -> <标识符><数字>
  - <标识符> -> <标识符><字母>
  - <字母>   -> a|b|c|...|z
  - <数字>   -> 0|1|2|...|9

上面的规则叫做产生式也叫重写规则。


`->` 是元语言符号， 它和 `::=` 是可以互相代替的 表示 “`定义为`” ； `|` 表示 “`或者`”。


文法 `G` 定义为四元组 $(V_n,V_t,P,S)$ 。

- $V_n$ 非终结符号集
- $V_t$ 终结符集
- $P$ 重写规则集
- $S$ 表示符号， $S \in V_n$

很多时候，不用将文法 $G$ 的四元组显示地表示出来，而只将产生式写出。一般约定，第一条产生式的左部是标识符；用尖括号括起来的是非终结符，不用尖括号括起来的是终结符，或者用大写字母表示非终结符，小写字母表示终结符。


以上面的文法 $G$ 为例:

$V_n = {<标识符>,<字母>,<数字>}$ 

$V_t = {a,b,c, \cdots , z,0,1,2, \cdots , 9}$

$P = {<标识符> -> <字母>, <标识符> -> <标识符><数字>, \cdots , <数字> -> 0,1,2, \cdots , 9}$

$S = {<标识符>}$


显然： $V_n \cap V_t = \emptyset$ ， $V=V_n \cup V_t$。 (V 是字汇表)。

#### 产生式

有符号串 $v=233<字母>666$ ， $w=233a666$ ， 产生式 $<字母>::=a$

则称 $v$ 直接推导/直接产生出 $w$ 记为 $v \Rightarrow w$ 

或称 $w$ 直接归约到 $v$ 记为 $w \rightarrow v$

$v \Rightarrow w_0$ 推到长度 $n = 1$

$v = w_0$ 推到长度 $n = 0$


- 多步推导：  $v \Rightarrow^+ w$ , $n \geq 1$ 
- 推导长度：  $v \Rightarrow^{*} w$ , $n \geq 0$ 
- 句型： 若存在文法  $G[z]$  其中  $z$  是识别符号， 字汇表是  $v$  如果  $z \Rightarrow^{*}x， x \in v^{*} x$  (z能推导出x x属于字汇表的闭包 也就是包含非终结符) 则称  $x$  为句型。
- 句子：若存在文法  $G[z]$  其中  $z$  是识别符号， 字汇表是  $v$  如果  $z \Rightarrow^{*}x， x \in v^{*}_t$  (z能推导出x x属于字汇表终结符的闭包 也就是只包含非终结符)则称  $x$  为句子。


文法描述的语言是该文法一切句子的集合。


 $(G[S])={ x| S \Rightarrow^{*} x ，且 x \in v^{\*}_t }$




